<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã›ã‚“ãã‚·ã‚§ãƒ•ã®çŒ®ç«‹ãƒ¡ãƒ¼ã‚«ãƒ¼</title>
    <style>
        body{font-family:'Segoe UI',sans-serif;background:linear-gradient(to bottom,#fff8f0,#ffe8d6);color:#333;max-width:800px;margin:40px auto;padding:20px;}
        h1{text-align:center;color:#e67e22;font-size:28px;margin-bottom:0;}
        /* â˜…ã“ã“ã ã‘å¾Œã§è‡ªåˆ†ã®ã›ã‚“ããã‚“PNGã«å·®ã—æ›¿ãˆã¦ã­ï¼ï¼ˆ180Ã—240æ¨å¥¨ï¼‰ */
        .senku{width:180px;height:240px;background:#e67e22;border-radius:12px;margin:20px auto;background-image:url('senku.png');background-size:cover;background-position:center;}
        .senku::after{content:"ã›ã‚“ããã‚“";color:white;font-size:18px;display:flex;align-items:center;justify-content:center;height:100%;background:rgba(0,0,0,0.4);border-radius:12px;opacity:0;transition:0.3s;}
        .senku:hover::after{opacity:1;}
        .container{background:white;padding:30px;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.1);}
        input{padding:14px;width:100%;border:2px solid #eee;border-radius:12px;font-size:16px;box-sizing:border-box;margin:10px 0;}
        button{background:#e67e22;color:white;border:none;padding:14px 28px;border-radius:12px;cursor:pointer;font-weight:bold;font-size:16px;}
        button:hover{background:#d35400;}
        .random-btn{background:#95a5a6;margin-left:10px;}
        .random-btn:hover{background:#7f8c8d;}
        .tags{display:flex;flex-wrap:wrap;gap:10px;margin:15px 0;}
        .tag{background:#f39c12;color:white;padding:8px 16px;border-radius:30px;font-size:14px;}
        .result{margin-top:30px;padding:25px;background:#fdfd96;border-radius:16px;display:none;text-align:center;}
        .dish{background:white;padding:20px;margin:15px 0;border-radius:12px;border-left:6px solid #e67e22;box-shadow:0 4px 10px rgba(0,0,0,0.1);}
        .name{font-size:22px;font-weight:bold;color:#e67e22;}
        .info{font-size:14px;color:#777;margin:8px 0;}
        .ingredients{font-size:15px;margin:15px 0;background:#f8f8f8;padding:12px;border-radius:8px;}
        .steps{text-align:left;margin:15px 0;line-height:1.8;}
        .comment{margin-top:20px;font-style:italic;color:#555;background:#f8f8f8;padding:15px;border-radius:10px;font-size:16px;}
        .copy-btn{background:#3498db;padding:10px 16px;border-radius:50px;font-size:20px;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,0.2);}
        .copy-btn:hover{background:#2980b9;}
    </style>
</head>
<body>
    <h1>ã›ã‚“ãã‚·ã‚§ãƒ•ã®çŒ®ç«‹ãƒ¡ãƒ¼ã‚«ãƒ¼</h1>
    <div class="senku"></div> <!-- â†ã“ã“ã« senku.png ã‚’åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«ç½®ãã ã‘ï¼ -->
    
    <div class="container">
        <p style="text-align:center;color:#777;margin-bottom:20px;">å†·è”µåº«ã«ã‚ã‚‹é£Ÿæã‚’ã‚¹ãƒšãƒ¼ã‚¹ã§åŒºåˆ‡ã£ã¦å…¥ã‚Œã¦ãã‚Œ</p>
        <input type="text" id="input" placeholder="ä¾‹ï¼šé¶ã‚‚ã‚‚è‚‰ ç‰ã­ã åµ" autofocus>
        <div style="text-align:center;margin:20px 0;">
            <button onclick="search()">çŒ®ç«‹ã‚’æ±ºã‚ã‚‹</button>
            <button class="random-btn" onclick="randomMenu()">ä»Šæ—¥ã®ä¿ºã®æ°—åˆ†</button>
        </div>
        <div class="tags" id="tags"></div>

        <div class="result" id="result">
            <div id="dish-output"></div>
            <button onclick="search()" style="margin-top:20px;background:#7f8c8d;">åˆ¥ã®æ¡ˆã‚’ãã‚Œ</button>
        </div>
    </div>

    <script>
        // é£Ÿæåæ­£è¦åŒ–
        const normalize = text => text.replace(/ç‰ã­ã|ç‰ãƒã‚®|ã‚¿ãƒãƒã‚®|ç‰è‘±/gi, "ç‰ã­ã")
                                     .replace(/é¶è‚‰|é¶ã‚‚ã‚‚|é¶ã‚‚ã‚‚è‚‰/gi, "é¶ã‚‚ã‚‚è‚‰")
                                     .replace(/è±šè‚‰|è±šãƒãƒ©|è±šã“ã¾/gi, "è±šè‚‰")
                                     .replace(/ã»ã†ã‚Œã‚“è‰|ãƒ›ã‚¦ãƒ¬ãƒ³è‰/gi, "ã»ã†ã‚Œã‚“è‰")
                                     .replace(/ã•ã°|é¯–/gi, "ã•ã°");

        const data = { "pairs": [
            {"ingredients":["é¶ã‚‚ã‚‚è‚‰","ç‰ã­ã"],"recipes":[
                {"name":"è¦ªå­ä¸¼ï¼ˆç°¡å˜ï¼‰","ingredients":["é¶ã‚‚ã‚‚è‚‰ 200g","ç‰ã­ã 1/2å€‹","åµ 2å€‹","ã‚ã‚“ã¤ã‚†ï¼ˆ3å€å¸Œé‡ˆï¼‰150ml","æ°´ 100ml"],"time_min":15,"difficulty":"â˜…â˜†â˜†","steps":["1. ç‰ã­ãè–„åˆ‡ã‚Šã§å¼·ç«1åˆ†ç‚’ã‚ã‚‹","2. é¶è‚‰ä¸€å£å¤§å…¥ã‚Œã¦ä¸€ç·’ã«ç‚’ã‚ã‚‹","3. ã‚ã‚“ã¤ã‚†ï¼‹æ°´ã§ç…®ç«‹ã¦ä¸­ç«5åˆ†","4. æº¶ãåµ2å›ã«åˆ†ã‘ã¦æµã—å…¥ã‚Œ30ç§’ã§å®Œæˆ"],"senku_comment":"ç‰ã­ãã®ç”˜ã•ã¯æœ€åˆã«ç‚’ã‚ã‚‹ã“ã¨ã§å‡ºã‚‹ã€‚å¤±æ•—ã—ã‚ˆã†ãŒãªã„ã€‚" },
                {"name":"é¶ã®ã‚¬ãƒ¼ãƒªãƒƒã‚¯ã‚½ãƒ†ãƒ¼","ingredients":["é¶ã‚‚ã‚‚è‚‰ 200g","ç‰ã­ã 1/4å€‹","ã«ã‚“ã«ã 1ç‰‡","ã‚ªãƒªãƒ¼ãƒ–ã‚ªã‚¤ãƒ« å¤§ã•ã˜1","å¡© å°ã•ã˜1/2","é»’èƒ¡æ¤’ é©é‡","ãƒ¬ãƒ¢ãƒ³æ± å°‘ã€…"],"time_min":20,"difficulty":"â˜…â˜…â˜†","steps":["1. é¶è‚‰ã«å¡©èƒ¡æ¤’","2. å¼·ç«ã§çš®ç›®ã‹ã‚‰ç„¼ãç›®","3. ç‰ã­ãã¨ã«ã‚“ã«ãã‚¹ãƒ©ã‚¤ã‚¹æŠ•å…¥","4. è£è¿”ã—ã¦è“‹ã—ã¦å¼±ç«4åˆ†","5. ãƒ¬ãƒ¢ãƒ³çµã£ã¦å®Œæˆ"],"senku_comment":"ç„¼ãç›®ãŒå‘½ã€‚ãƒ¬ãƒ¢ãƒ³ã‚ã‚‹ãªã‚‰çµ¶å¯¾çµã‚Œã€‚" }
            ]},
            {"ingredients":["è±šè‚‰","ã‚­ãƒ£ãƒ™ãƒ„"],"recipes":[
                {"name":"è¶…ç°¡å˜å›é‹è‚‰","ingredients":["è±šè–„åˆ‡ã‚Šè‚‰ 150g","ã‚­ãƒ£ãƒ™ãƒ„ 1/4å€‹","ç”œéººé†¤ å¤§ã•ã˜1","è±†æ¿é†¤ å°ã•ã˜1","é†¤æ²¹ å¤§ã•ã˜1","é…’ å¤§ã•ã˜1","ã”ã¾æ²¹ é©é‡"],"time_min":20,"difficulty":"â˜…â˜…â˜†","steps":["1. è±šã¯é…’å°‘ã€…ã§ä¸‹èŒ¹ã§","2. ã”ã¾æ²¹ã§è±šâ†’ã‚­ãƒ£ãƒ™ãƒ„ã®é †ã§å¼·ç«ç‚’ã‚","3. èª¿å‘³æ–™å…¨éƒ¨å…¥ã‚Œã¦1åˆ†çµ¡ã‚ã‚‹"],"senku_comment":"ã‚­ãƒ£ãƒ™ãƒ„ã¯æœ€å¾Œã«30ç§’ã€‚ã‚·ãƒ£ã‚­ã‚·ãƒ£ã‚­æ®‹ã™ã®ãŒãƒ—ãƒ­ã€‚" }
            ]},
            {"ingredients":["ãƒ„ãƒŠç¼¶","ã‚­ãƒ£ãƒ™ãƒ„"],"recipes":[
                {"name":"ãƒ„ãƒŠã‚­ãƒ£ãƒ™ãƒ„","ingredients":["ãƒ„ãƒŠç¼¶ 1ç¼¶ï¼ˆæ²¹ã”ã¨ï¼‰","ã‚­ãƒ£ãƒ™ãƒ„ å¥½ããªã ã‘","å¡©èƒ¡æ¤’ é©é‡","ãƒãƒ¨ãƒãƒ¼ã‚º ãŠå¥½ã¿ã§"],"time_min":5,"difficulty":"â˜…â˜†â˜†","steps":["1. ã‚­ãƒ£ãƒ™ãƒ„ã–ãåˆ‡ã‚Š","2. ãƒ„ãƒŠç¼¶æ²¹ã”ã¨å…¨éƒ¨ã¶ã¡è¾¼ã‚€","3. å¡©èƒ¡æ¤’ã ã‘","4. ãƒãƒ¨ãƒãƒ¼ã‚ºã‹ã‘ã¦ã‚‚ã†ã¾ã„"],"senku_comment":"ã“ã‚Œæœ€å¼·ã€‚5åˆ†ã§é£Ÿãˆã‚‹ã€‚ä¿ºã®å†·è”µåº«å¸¸å‚™ã€‚" }
            ]},
            {"ingredients":["ã•ã°","å¤§æ ¹"],"recipes":[
                {"name":"ã•ã°ã®å‘³å™Œç…®ï¼‹å¤§æ ¹æ·»ãˆ","ingredients":["ã•ã°åˆ‡ã‚Šèº« 2åˆ‡ã‚Œ","å¤§æ ¹ 1/4æœ¬","å‘³å™Œ å¤§ã•ã˜2","é…’ å¤§ã•ã˜3","ã¿ã‚Šã‚“ å¤§ã•ã˜2","ç ‚ç³– å¤§ã•ã˜1","ç”Ÿå§œ è–„åˆ‡ã‚Š5æš","æ°´ 200ml"],"time_min":30,"difficulty":"â˜…â˜…â˜…","steps":["1. å¤§æ ¹ã¯é¢å–ã‚Šã—ã¦ä¸‹èŒ¹ã§","2. ã•ã°ã¯ç„¼ã„ã¦è‡­ã¿å–ã‚Š","3. å…¨éƒ¨é‹ã«ã¶ã¡è¾¼ã‚“ã§ä¸­ç«15åˆ†","4. å‘³å™Œã¯æœ€å¾Œæº¶ãå…¥ã‚Œ"],"senku_comment":"æ™‚é–“ã‹ã‹ã‚‹ã‘ã©ä¸å¯§ã«ã‚„ã‚Œã°å®¶åº­ã®å‘³ã«ãªã‚‹ã€‚å†¬ã«æœ€é«˜ã€‚" }
            ]},
            {"ingredients":["ã»ã†ã‚Œã‚“è‰","åµ"],"recipes":[
                {"name":"ã»ã†ã‚Œã‚“è‰ã®åµã¨ã˜","ingredients":["ã»ã†ã‚Œã‚“è‰ 1/2æŸ","åµ 2å€‹","ã ã— 150ml","é†¤æ²¹ å¤§ã•ã˜1","ã¿ã‚Šã‚“ å°ã•ã˜1"],"time_min":10,"difficulty":"â˜…â˜†â˜†","steps":["1. ã»ã†ã‚Œã‚“è‰ã¯ã•ã£ã¨èŒ¹ã§ã¦3cmã«åˆ‡ã‚‹","2. ã ã—ï¼‹é†¤æ²¹ï¼‹ã¿ã‚Šã‚“ã§ç…®ã‚‹","3. æº¶ãåµã§ãµã‚“ã‚ã‚Šã¨ã˜ã‚‹"],"senku_comment":"ã‚·ãƒ³ãƒ—ãƒ«ã ã‘ã©æ „é¤Šæº€ç‚¹ã€‚æœã§ã‚‚ã„ã‘ã‚‹ã€‚" }
            ]},
            {"ingredients":["è±†è…","ã­ã","ç”Ÿå§œ"],"recipes":[
                {"name":"å†·ã‚„å¥´ã‚¢ãƒ¬ãƒ³ã‚¸","ingredients":["è±†è… 1ä¸","ã­ã ãŸã£ã·ã‚Š","ç”Ÿå§œã™ã‚ŠãŠã‚ã— å±±ç››ã‚Š","é†¤æ²¹ é©é‡"],"time_min":3,"difficulty":"â˜…â˜†â˜†","steps":["1. è±†è…å†·ãŸã„ã¾ã¾","2. ã­ãã¿ã˜ã‚“åˆ‡ã‚Šï¼‹ç”Ÿå§œã™ã‚ŠãŠã‚ã—","3. é†¤æ²¹ã¯ã‹ã‘ã™ãå³ç¦"],"senku_comment":"ã“ã‚Œã§å®Œçµã€‚å‘³ãŒæ­»ã¬ã‹ã‚‰é†¤æ²¹ã¯æ§ãˆã‚ã«ãªã€‚" }
            ]},
            {"ingredients":["é®­","ã»ã†ã‚Œã‚“è‰"],"recipes":[
                {"name":"é®­ã¨ã»ã†ã‚Œã‚“è‰ã®ã‚¯ãƒªãƒ¼ãƒ ç…®","ingredients":["é®­åˆ‡ã‚Šèº« 2åˆ‡ã‚Œ","ã»ã†ã‚Œã‚“è‰ 1/2æŸ","ç‰›ä¹³ 200ml","ãƒã‚¿ãƒ¼ 10g","å°éº¦ç²‰ å¤§ã•ã˜1","ã‚³ãƒ³ã‚½ãƒ¡ å°ã•ã˜1","å¡©èƒ¡æ¤’ é©é‡"],"time_min":20,"difficulty":"â˜…â˜…â˜†","steps":["1. é®­ã«å¡©ã—ã¦ä¸¡é¢ç„¼ã","2. ã»ã†ã‚Œã‚“è‰ã¯èŒ¹ã§ã¦æ°´æ°—åˆ‡ã‚‹","3. ãƒã‚¿ãƒ¼ã§å°éº¦ç²‰ç‚’ã‚ã¦ç‰›ä¹³ã§ä¼¸ã°ã™","4. ã‚³ãƒ³ã‚½ãƒ¡ã§å‘³èª¿æ•´ã—ã¦å…·ææŠ•å…¥"],"senku_comment":"å‘³ã¯ã‚³ãƒ³ã‚½ãƒ¡ã§æ±ºã¾ã‚‹ã€‚ãƒ‘ãƒ³ã§ã‚‚ã”é£¯ã§ã‚‚çµ¶å¯¾ã„ã‘ã‚‹ã€‚" }
            ]}
        ]};

        let currentIngredients = [];
        let currentDishText = "";

        document.getElementById('input').addEventListener('keypress', e => { if(e.key==='Enter') search(); });

        function search() {
            const raw = document.getElementById('input').value.trim();
            if(!raw) return;
            currentIngredients = raw.split(/\s+/).map(normalize);
            updateTags();
            showRandomDish();
        }

        function updateTags() {
            const tagsDiv = document.getElementById('tags');
            tagsDiv.innerHTML = '';
            currentIngredients.forEach(t => {
                const tag = document.createElement('span');
                tag.className = 'tag';
                tag.textContent = t;
                tagsDiv.appendChild(tag);
            });
        }

        function showRandomDish() {
            const matched = [];
            for(const pair of data.pairs) {
                const normalizedPair = pair.ingredients.map(normalize);
                const hitCount = normalizedPair.filter(i => currentIngredients.includes(i)).length;
                if(hitCount >= normalizedPair.length - 1) matched.push(...pair.recipes);
            }

            if(matched.length === 0) {
                document.getElementById('dish-output').innerHTML = '<div class="dish">â€¦â€¦ã¡ã‚‡ã£ã¨å³ã—ã„çµ„ã¿åˆã‚ã›ã ãªã€‚ã§ã‚‚å†·è”µåº«ã‚‚ã†ä¸€å›è¦‹ã¦ã¿ã‚ã‚ˆã€‚</div>';
                return;
            }

            const dish = matched[Math.floor(Math.random() * matched.length)];
            currentDishText = `${dish.name}\né›£æ˜“åº¦ï¼š${dish.difficulty}ã€€ç´„${dish.time_min}åˆ†\n\nã€ææ–™ã€‘\n${dish.ingredients.join("\n")}\n\nã€æ‰‹é †ã€‘\n${dish.steps.map((s,i)=>`${i+1}. ${s}`).join("\n")}\n\nã€Œ${dish.senku_comment}ã€`;

            document.getElementById('dish-output').innerHTML = `
                <div class="dish">
                    <div class="name">${dish.name}</div>
                    <div class="info">${dish.difficulty}ã€€ç´„${dish.time_min}åˆ†</div>
                    <div class="ingredients"><strong>ææ–™ï¼š</strong>${dish.ingredients.join("ã€€ï¼ã€€")}</div>
                    <div class="steps"><strong>æ‰‹é †</strong><ol><li>${dish.steps.join('</li><li>')}</li></ol></div>
                    <div class="comment">ã€Œ${dish.senku_comment}ã€</div>
                    <div style="margin-top:20px;">
                        <span class="copy-btn" onclick="copyRecipe()" title="ã‚³ãƒ”ãƒ¼ï¼†å…±æœ‰">ğŸ“‹</span>
                    </div>
                </div>
            `;
            document.getElementById('result').style.display = 'block';
        }

        function copyRecipe() {
            if(navigator.share && navigator.canShare && navigator.canShare({text: currentDishText})) {
                navigator.share({title: "ã›ã‚“ãã‚·ã‚§ãƒ•ã®çŒ®ç«‹", text: currentDishText});
            } else {
                navigator.clipboard.writeText(currentDishText).then(()=>{
                    alert("ãƒ¬ã‚·ãƒ”ã‚’ã‚³ãƒ”ãƒ¼ã—ãŸã");
                });
            }
        }

        function randomMenu() {
            const randomPair = data.pairs[Math.floor(Math.random()*data.pairs.length)];
            document.getElementById('input').value = randomPair.ingredients.join(" ");
            search();
        }
    </script>
</body>
</html>